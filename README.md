# Taperology

## Background

## Introduction to Taperology
This project is a website that aims to help clinicians reduce and or stop prescribing benzodiazepines (BZD) for some of their patients. The website adopts the taper methodology to achieve this goal. In this context, tapering refers to the patient's practice of gradually reducing the dosage of benzodiazepines and eventually withdrawing from using the drug.

The tapering process involves several challenges. A rapid tapering process may cause withdrawal symptoms, including headaches and sleep disturbances. Thus, a sufficient tapering process must adapt to the patient's personal condition and their needs. This website provides resources that address multiple aspects of the tapering process. Also, it offers a taper scheduler so the clinicians can generate taper schedules for their patients and adjust the schedule to match their patients' conditions and needs.

The website consists of the following sections:

1. **Homepage**
    - Introducing the website and explaining the functions of different sections. 
2. **Resource**
    - Resources for clicians and resources that clicians can offer to their patients to help guide their tapering process (e.g., resources on insomnia and anxiety).
3. **Taper Scheduler**
    - A taper scheduler that helps clicians generate taper schedules and allows clicians to customize them to meet patients' conditions.
4. **Refer Patient**
    - A link to the SAMHSA Behavioral Health Treatment Services Locator. 

## Tech

This website was developed using **React Native** under the [Expo](https://docs.expo.dev) platform. The reason for choosing React Native (Javascript) is that it's capable of building universal apps across different platforms, which means that the code can also be used to create iOS or Android apps with a few lines of code changes. Expo also provides great support for the [react-native-web](https://necolas.github.io/react-native-web/docs/) framework, which enables developing websites using React Native and its amazing third-party APIs.

The website also used Google as another service provider. The website is hosted by Google Firebase. In the previous versions, the website also used Firebase as the cloud database to store users' personal data, including their login emails and saved schedules. The website uses [Google Analytics](https://docs.expo.dev/versions/latest/sdk/firebase-analytics/) to track users' usage of different sections and functions. These tracking data will be displayed in the Firebase dashboard.

Below are the descriptions for usage of the project's files. For more details, please refer to the code comments inside the files.

Files in use (.js files):
- App.js
- menu.js
- index.js
- Resource.js
- Calculator.js
- babel.config.js (automatically generated by Expo)

To be noticed, the project still contains files that are responsible for user specific actions (e.g., logging in, signing up, saving schedules, updating saved schedules, etc.), which has been removed in the current version. Those files are not in-use since we removed the User Center page. Those functions can be activated in the future. Those files are:
- DataModel.js
- googleLogin.js
- schedule.js
- UserCenter.js

**App.js**

This file initiates the Firebase app (required for using Google Firebase Analytics). The file uses the [react-navigation](https://reactnavigation.org) library to navigate through different sections. 

To be noticed, the ```onStateChange()```  function is just an example to showcase the way to track if the user switches from one section to another. It can either be deleted or used in other places. 

Also, if the developer wants to load different fonts, this is the place. 

**menu.js**

The menu.js file renders the menu bar on top of the screen. This is the place where the developer can modify the layout and design of the menu bar. This file intends to make the menu bar a component that can be plugged into any sections. To be noticed, the navigation functions on the menu bar are passed from the patient component. 

**index.js**

The index.js file renders the index page, which has been set as the initial page in the App.js. 

**Resource.js**

The Resource.js file renders the Resource page. It renders lists of resource information into card views. Developers can change the text and URLs in those lists. 

**Calculator.js**

This file renders the Taper Sceduler page. It contains functions which allow users to generate and modify the taper schedule.

## How to start

### Install React Native and Expo

As mentioned, this website was developed using React Native and Expo. The Expo development environment is also recommended by React Native Development Team. The developer can check out the document on both [React Native](https://reactnative.dev/docs/environment-setup) and [Expo website](https://docs.expo.dev/get-started/installation/). 

Developing react native app within Expo requires few dependents:
- [Node.js](https://nodejs.org/en/)
- [Git](https://git-scm.com/)
- [Watchman](https://facebook.github.io/watchman/docs/install#buildinstall)

1. To install Expo CLI:
```
npm install --global expo-cli
```
2. Clone this repository
```
$ git clone https://github.com/KefanXu/taperology
```
3. Install all dependencies from package.json 
```
npm install
```
4. Create a Firebase project 
- Login to the Firebase 
- Open the project setting and copy the firebaseConfig
- Create a new .js file called secret.js 
    - To be noticed, this ```secret.js``` file is imported in the App.js file to initialize the Firebase app and gain access to Firebase related functions, such as Google Firebase Analytics. This is also why this file is also imported in the DataModel.js file. If the developer wants to use other platforms to host the website and track the usage, all codes that are related to Google Firebase Analytics need to be removed and the ```secret.js``` needs to be replaced with another configuration file.

5. Run and test the project:

```
expo start -w
```

6. Publish and update the website

- If the developer hope to keep using Firebase to host the website, please follow this [instruction](https://docs.expo.dev/distribution/publishing-websites/#firebase-hosting) that Expo offered.
